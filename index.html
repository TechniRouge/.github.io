<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Big Back Certification Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fefae0; color: #333; margin: 0; padding: 20px; }
    .hidden { display: none; }
    .center { text-align: center; }
    button { padding: 10px 20px; margin: 10px; font-size: 16px; }
    .certificate, .leaderboard, .question-box { border: 2px solid #ccc; padding: 20px; border-radius: 10px; background: #fff; margin-top: 20px; }
    .certificate { font-family: 'Comic Sans MS', cursive; text-align: center; background: #fffae6; }
    .leaderboard ol { padding-left: 20px; }
  </style>
</head>
<body>
  <div id="homeScreen" class="center">
    <h1>ğŸ‹ï¸â€â™‚ï¸ Big Back Certification ğŸ‹ï¸â€â™€ï¸</h1>
    <button onclick="showSection('quizSection')">Start Quiz</button>
    <button onclick="showSection('leaderboardSection')">View Leaderboard</button>
  </div>

  <div id="quizSection" class="hidden">
    <h2>Big Back Certification Quiz</h2>
    <form id="quizForm">
      <label>Name: <input type="text" id="userName" required></label><br><br>
      <label>Email: <input type="email" id="userEmail" required></label><br><br>
      <div id="questions"></div>
      <button type="submit">Submit</button>
    </form>
  </div>

  <div id="leaderboardSection" class="hidden leaderboard">
    <h2>ğŸ— Leaderboard of Legends ğŸ—</h2>
    <ol id="leaderboardList"></ol>
    <button onclick="showSection('homeScreen')">Back to Home</button>
  </div>

  <div id="certificateSection" class="hidden certificate">
    <h2>ğŸ† Official Big Back Certificate ğŸ†</h2>
    <p id="certName"></p>
    <p id="certScore"></p>
    <p>Hereby awarded the title:</p>
    <h3>â€œCertified Glutton of Gloryâ€</h3>
    <p>Signed by Dr. Buff Backs, PhD in Snackology</p>
    <button onclick="downloadCertificate()">Download Certificate</button>
    <button onclick="showSection('homeScreen')">Back to Home</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas"></script>
  <script>
    emailjs.init("fBwObR_tKYEjPcn4G"); // Public key

    const questions = [
      { q: "How many calories can a competitive eater consume in one sitting?", a: "c" },
      { q: "Which food is most commonly used in eating contests?", a: "d" },
      { q: "Which country is famous for hosting rice-eating competitions?", a: "d" },
      { q: "What organ primarily expands to store large meals?", a: "a" },
      { q: "Who is a famous competitive eater from Japan?", a: "b" },
      { q: "Whatâ€™s a Big Back likely to do after a huge meal?", a: "c" },
      { q: "Which programming language is the most Big Back of all?", a: "c" },
      { q: "What percent of your stomach can stretch during overeating?", a: "b" },
      { q: "Which is the most likely Big Back Taco Bell order?", a: "b" },
      { q: "Which hormone helps regulate hunger?", a: "b" },
      { q: "What is the world record for hot dogs eaten in 10 mins?", a: "c" },
      { q: "Whatâ€™s something a Big Back says at a buffet?", a: "b" },
      { q: "Why would a Big Back drink water before eating?", a: "b" },
      { q: "Which veggie is negative-calorie?", a: "b" },
      { q: "Which would excite a Big Back the most?", a: "c" },
      { q: "Which fries are dangerously bottomless?", a: "c" },
      { q: "Big Backs are known to have what?", a: "c" },
      { q: "What do stretchy pants provide?", a: "c" },
      { q: "Whatâ€™s a side effect of Big Backing too hard?", a: "c" },
      { q: "Whatâ€™s Joey Chestnutâ€™s hot dog count record?", a: "d" },
      { q: "What strategy helps Big Backs win contests?", a: "d" },
      { q: "Which movie snack do Big Backs dominate?", a: "b" },
      { q: "What is a Big Back most likely to do at a buffet?", a: "d" },
      { q: "Least favorite snack of a Big Back?", a: "d" },
      { q: "How do Big Backs prepare for meals?", a: "d" },
      { q: "How many chicken wings can a pro eat in 30 mins?", a: "c" },
      { q: "Which tool best describes a Big Backâ€™s fork?", a: "c" },
      { q: "What best describes a Big Back's stomach capacity?", a: "d" },
      { q: "How many pizza slices are a snack for a Big Back?", a: "d" },
      { q: "Is becoming a Big Back a lifestyle?", a: "b" }
    ];

    function showSection(id) {
      document.querySelectorAll("#homeScreen, #quizSection, #leaderboardSection, #certificateSection").forEach(el => el.classList.add("hidden"));
      document.getElementById(id).classList.remove("hidden");
      if (id === 'leaderboardSection') renderLeaderboard();
    }

    document.getElementById("questions").innerHTML = questions.map((q, i) => `
      <div class="question-box">
        <p><strong>Q${i + 1}:</strong> ${q.q}</p>
        <label><input type="radio" name="q${i}" value="a" required> A</label>
        <label><input type="radio" name="q${i}" value="b"> B</label>
        <label><input type="radio" name="q${i}" value="c"> C</label>
        <label><input type="radio" name="q${i}" value="d"> D</label>
      </div>`).join("");

    document.getElementById("quizForm").onsubmit = function (e) {
      e.preventDefault();
      const name = document.getElementById("userName").value;
      const email = document.getElementById("userEmail").value;
      const answers = questions.map((q, i) => document.querySelector(`input[name='q${i}']:checked`)?.value);
      const score = answers.filter((a, i) => a === questions[i].a).length;

      // Save to leaderboard
      const scores = JSON.parse(localStorage.getItem("bigBackScores") || "[]");
      scores.push({ name, score });
      localStorage.setItem("bigBackScores", JSON.stringify(scores));

      // Send email
      emailjs.send("Big_back", "template_0br65x8", {
        name,
        email,
        score,
        answers: answers.join(", ")
      }).then(() => {
        document.getElementById("certName").textContent = `${name}, you scored ${score}/30!`;
        document.getElementById("certScore").textContent = `Score: ${score}/30`;
        showSection("certificateSection");
      });
    };

    function renderLeaderboard() {
      const list = document.getElementById("leaderboardList");
      const scores = JSON.parse(localStorage.getItem("bigBackScores") || "[]");
      const sorted = scores.sort((a, b) => b.score - a.score).slice(0, 10);
      list.innerHTML = sorted.map(s => `<li><strong>${s.name}</strong> â€“ ${s.score}/30</li>`).join("");
    }

    function downloadCertificate() {
      html2canvas(document.getElementById("certificateSection")).then(canvas => {
        const link = document.createElement('a');
        link.download = 'Big_Back_Certificate.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    }
  </script>
</body>
</html>
